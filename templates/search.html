{% extends 'base.html' %} {% block content %}
<body class="search-bg">
  <header class="search-header">
    <div class="search-nav">
      <a href="{{ url_for('home') }}" role="button">HOME</a>
      <a href="{{ url_for('search') }}" role="button">CAFES</a>
      <a href="{{ url_for('about') }}" role="button">ABOUT</a>
      <a href="{{ url_for('about') }}" role="button">SIGN IN/UP</a>
      <a href="{{ url_for('about') }}" role="button">SIGN OUT</a>
    </div>
  </header>
  <div class="search-forms">
    <div class="left-form">
      <form method="post">
        <label for="cafe-name"> Search Cafe by Name </label>
        <br /><br />
        <input type="search" name="cafe-name" placeholder="Type cafe name..." />
        <br /><br />
        <input type="submit" value="Search" class="search-button-left" />
      </form>
    </div>
    <div class="right-form">
      <form method="post">
        <label style="font-size: 48px; padding-left: 5%;">
          Search Cafe by Location</label
        >
        <table>
          <tr>
            <td>
              <label>Country:</label>
            </td>
            <td>
              <select name="country" id="country">
                <option value="">Select</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>
              <label>City:</label>
            </td>

            <td>
              <select name="city" id="city">
                <option value="">Select</option>
              </select>
            </td>
          </tr>

          <tr>
            <td>
              <label>District:</label>
            </td>

            <td>
              <select name="district" id="district">
                <option value="">Select</option>
              </select>
            </td>
          </tr>

          <tr>
            <td>
              <label>Neighborhood:</label>
            </td>
            <td>
              <select name="neighborhood" id="neighborhood">
                <option value="">Select</option>
              </select>
            </td>
          </tr>
        </table>
        <input type="submit" value="Search" class="search-button-right" />
      </form>
    </div>
    <div class="search-map">
      <div>Search on Map</div>
      <div>
        <a href="https://www.google.com/maps/" target="_blank"><img src="{{ url_for('static', filename='/assets/search-map.svg') }}" alt="the earth"></a>
      </div>
    </div>

    <script>
      // City → Districts → Neighborhoods data
      const data = {
        Istanbul: {
          Kadıköy: ["Moda", "Fenerbahçe", "Suadiye"],
          Beşiktaş: ["Levent", "Etiler", "Ortaköy"],
        },
        Ankara: {
          Çankaya: ["Kızılay", "Ayrancı", "GOP"],
          Keçiören: ["Etlik", "Bağlum", "Ufuktepe"],
        },
        Izmir: {
          Konak: ["Alsancak", "Karataş", "Kemeraltı"],
          Bornova: ["Evka 3", "Küçükpark", "Kazımdirik"],
        },
      };

      const cityRadios = document.querySelectorAll('input[name="city"]');
      const districtSelect = document.getElementById("district");
      const neighborhoodSelect = document.getElementById("neighborhood");

      // When a city is selected
      cityRadios.forEach((radio) => {
        radio.addEventListener("change", () => {
          const city = radio.value;

          // Clear previous options
          districtSelect.innerHTML =
            '<option value="">-- Select District --</option>';
          neighborhoodSelect.innerHTML =
            '<option value="">-- Select District First --</option>';

          // Populate new districts
          for (const district in data[city]) {
            const option = document.createElement("option");
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          }
        });
      });

      // When a district is selected
      districtSelect.addEventListener("change", () => {
        const city = document.querySelector(
          'input[name="city"]:checked'
        )?.value;
        const district = districtSelect.value;

        // Clear previous options
        neighborhoodSelect.innerHTML =
          '<option value="">-- Select Neighborhood --</option>';

        if (city && district) {
          const neighborhoods = data[city][district];
          neighborhoods.forEach((n) => {
            const option = document.createElement("option");
            option.value = n;
            option.textContent = n;
            neighborhoodSelect.appendChild(option);
          });
        }
      });
    </script>

    <!-- <div class="row">
      <div class="col-12" style="text-align: center">
        <form>
          <label for="order_by">Order By:</label>
          <select name="order_by">
            <option value="latest">Distance</option>
          </select>
        </form>
      </div>
    </div> -->
  </div>
</body>

{% endblock %}
