{% extends 'base.html' %} {% block content %}
<body class="home-bg">
  <header class="d-flex justify-content-between align-items-center p-3">
    <div class="home-nav d-flex">
      <a href="{{ url_for('home') }}" role="button" class="btn">HOME</a>
      <a href="{{ url_for('search') }}" role="button" class="btn">CAFES</a>
      <a href="{{ url_for('about') }}" role="button" class="btn">ABOUT</a>
    </div>
    <div class="home-sign d-flex">
      <a href="{{ url_for('about') }}" role="button" class="btn">SIGN IN/UP</a>
      <a href="{{ url_for('about') }}" role="button" class="btn">SIGN OUT</a>
    </div>
  </header>
  <div class="home-tilte-container bedfort-font">
    <text>
      Grab a cup of<br />
      <text style="font-size: 160px; padding-left: 25%">coffee?</text>
    </text>
  </div>
  <div class="wheel-container">
    <form
      id="nearestForm"
      method="POST"
      action="{{ url_for('search_result') }}"
    >
      <input type="hidden" name="lat" id="lat" />
      <input type="hidden" name="lon" id="lon" />
      <button type="submit" class="bean-button" onclick="setCoordinates(event)">
        <img
          src="{{ url_for('static', filename='assets/Coffee-bean.png') }}"
          alt="Coffee Bean"
          class="center-image"
        />
        <svg class="rotating-text" viewBox="0 0 400 400">
          <defs>
            <path id="topHalf" d="M50,200 A150,150 0 0,1 350,200" />
            <path id="botHalf" d="M350,200 A150,150 0 0,1 50,200" />
          </defs>

          <text
            class="dongle-font"
            font-size="30"
            fill="brown"
            text-anchor="middle"
          >
            <textPath href="#topHalf" startOffset="50%">
              Click to see the nearest café
            </textPath>
            <textPath href="#botHalf" startOffset="50%">
              Click to see the nearest café
            </textPath>
          </text>
        </svg>
      </button>
    </form>
  </div>

  <script>
    function setCoordinates(event) {
      event.preventDefault();

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            document.getElementById("lat").value = position.coords.latitude;
            document.getElementById("lon").value = position.coords.longitude;

            document.getElementById("nearestForm").submit();
          },
          function (error) {
            alert(
              "Unable to retrieve your location. Please allow location access."
            );
          }
        );
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }
  </script>
</body>

{% endblock %}
